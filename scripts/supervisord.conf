[supervisord]
nodaemon=true
logfile=/var/log/supervisord.log
user=root

[program:xvnc]
command=/usr/bin/Xtigervnc :1 -desktop "Clawdbot Desktop" -geometry 1920x1080 -depth 24 -rfbauth /home/developer/.vnc/passwd -rfbport 5901 -pn -SecurityTypes VncAuth
user=developer
autorestart=true
priority=10
environment=HOME="/home/developer",USER="developer"

[program:gnome-session]
command=/bin/bash -c "sleep 2 && export DISPLAY=:1 && export XDG_SESSION_TYPE=x11 && export XDG_CURRENT_DESKTOP=GNOME && dbus-launch --exit-with-session gnome-session"
user=developer
autorestart=true
priority=20
environment=HOME="/home/developer",USER="developer",DISPLAY=":1"

[program:novnc]
command=/bin/bash -c "sleep 3 && websockify --web=/usr/share/novnc/ 0.0.0.0:6080 localhost:5901"
user=developer
autorestart=true
priority=30

[program:clawdbot-gateway]
command=/bin/bash -c "sleep 5 && clawdbot gateway --port 18789 --allow-unconfigured"
user=developer
autorestart=true
priority=40
environment=HOME="/home/developer",USER="developer",CLAWDBOT_HOME="/clawdbot_home",WORKSPACE="/workspace",DISPLAY=":1"
